# Transly 开发任务清单（MVP）

## 1. 项目基础搭建
- [x] 1.1 初始化代码仓库（Git、分支规范、README）
- [x] 1.2 技术选型与依赖配置（Next.js、Node.js微服务、Vercel KV、Hugging Face API、TTS服务等）
- [x] 1.3 配置管理（Hugging Face API Key、模型参数、缓存配置等）

## 2. 前端开发（Next.js）
### 2.1 设计系统基础
- [x] 2.1.1 shadcn/ui设计系统集成与配置
- [x] 2.1.2 Tailwind CSS主题配置（专业蓝色彩系统、Inter字体、动效规范）
- [x] 2.1.3 响应式布局系统搭建（Mobile First、1200px最大宽度）
- [x] 2.1.4 无障碍访问基础配置（AA级对比度、键盘导航、ARIA标签）
- [x] 2.1.5 品牌视觉元素设计（Logo、图标库、插图风格）

### 2.2 核心UI组件
- [x] 2.2.1 语言选择器组件（下拉搜索 + 快速切换 + 本地语言名显示）
- [x] 2.2.2 翻译输入框组件（大尺寸文本域 + 字符计数 + 拖拽调整）
- [x] 2.2.3 翻译结果展示组件（复制按钮 + 语音播放 + 文本高亮）
- [x] 2.2.4 文件上传组件（虚线边框拖拽区 + 进度条 + 格式标注）
- [x] 2.2.5 语音播放器组件（暂停/继续/重播 + 音频进度条）
- [x] 2.2.6 状态反馈组件（成功绿/警告黄/错误红 + 用户友好文案）
- [x] 2.2.7 按钮系统组件（主要/次要/图标按钮 + 一致交互效果）
- [x] 2.2.8 语言切换组件（源语言↔目标语言一键对调，保持翻译内容）
- [x] 2.2.9 双向翻译导航组件（页面间跳转，语言对切换）
- [x] 2.2.10 智能语言检测组件（自动识别+手动确认界面）
- [x] 2.2.11 语言可用性控制系统（Coming Soon状态管理、选择器过滤）

### 2.3 页面开发
- [x] 2.3.1 首页（产品介绍 + 翻译工具）
- [x] 2.3.2 文档翻译页面（文件上传 + 翻译进度追踪）
- [x] 2.3.3 多语种Landing Page模板（SEO优化）- 已完成海地克里奥尔语页面
- [x] 2.3.4 关于页面（产品介绍、支持语言列表、FAQ）
- [x] 2.3.5 用户协议、隐私政策、合规声明页
- [x] 2.3.6 文本翻译独立页面（/text-translate）
- [x] 2.3.7 首页功能重构（展示多种翻译形式概览）

### 2.4 语言落地页系统（小语种→英文）
- [x] 2.4.1 海地克里奥尔语落地页（/creole-to-english）- 完整版本已完成
- [x] 2.4.2 老挝语落地页（/lao-to-english）- 完整版本已完成，包含所有内容模块
- [x] 2.4.3 斯瓦希里语落地页（/swahili-to-english）- 完整版本已完成，包含所有内容模块
- [x] 2.4.4 缅甸语落地页（/burmese-to-english）- 完整版本已完成，包含所有内容模块
- [x] 2.4.5 泰卢固语落地页（/telugu-to-english）- 完整版本已完成，包含所有内容模块
- [x] 2.4.6 Coming Soon页面模板（暂不支持的语言）
- [x] 2.4.7 语言落地页路由系统完善 - 已修复404问题

### 2.8 双向翻译落地页系统（英文→小语种）[新增]
- [x] 2.8.1 英文到海地克里奥尔语落地页（/english-to-creole）
- [x] 2.8.2 英文到老挝语落地页（/english-to-lao）
- [x] 2.8.3 英文到斯瓦希里语落地页（/english-to-swahili）
- [x] 2.8.4 英文到缅甸语落地页（/english-to-burmese）
- [x] 2.8.5 英文到泰卢固语落地页（/english-to-telugu）
- [x] 2.8.6 反向翻译页面SEO优化（独立meta、Schema、keywords）
- [x] 2.8.7 页面间双向链接系统（语言切换按钮、相关页面推荐）

### 2.4+ 语言落地页内容完善（新增）
- [x] 2.4.8 统一所有语言页面内容结构（按product.md模板）- 已完成
- [x] 2.4.9 为每个语言页面添加完整的FAQ模块 - 已完成
- [x] 2.4.10 为每个语言页面添加示例短语模块 - 已完成 
- [x] 2.4.11 为每个语言页面添加使用步骤说明 - 已完成
- [x] 2.4.12 为每个语言页面添加特色功能展示 - 已完成
- [x] 2.4.13 为每个语言页面添加相关语言推荐模块 - 已完成

### 2.5 多语言界面支持 (i18n)
- [ ] 2.5.1 Next.js国际化配置
- [ ] 2.5.2 语言切换组件开发
- [ ] 2.5.3 翻译文件结构建立
- [ ] 2.5.4 主要语种界面翻译（海地克里奥尔语、老挝语、斯瓦希里语等）
- [ ] 2.5.5 URL国际化支持
- [ ] 2.5.6 SEO多语言优化

### 2.6 Footer与辅助页面
- [x] 2.6.1 Contact Support页面
- [x] 2.6.2 API Documentation页面
- [x] 2.6.3 Help & FAQ页面  
- [x] 2.6.4 Coming Soon通用模板

### 2.7 SEO与Schema
- [x] 2.7.1 SEO标签、hreflang、canonical - 已在语言页面实现
- [x] 2.7.2 Schema.org结构化数据静态集成 - 已实现JSON-LD组件
- [x] 2.7.3 站点地图自动生成 - 已实现动态sitemap.ts
- [ ] 2.7.4 多语言页面SEO优化
- [ ] 2.7.5 Coming Soon页面SEO配置

### 2.7+ Schema结构化数据完善（新增）
- [x] 2.7.6 海地克里奥尔语页面 - 完整Schema已实现
- [x] 2.7.7 老挝语页面 - 已添加FAQ、HowTo、SoftwareApplication Schema
- [x] 2.7.8 斯瓦希里语页面 - 已添加完整Schema结构化数据
- [x] 2.7.9 缅甸语页面 - 已添加完整Schema结构化数据  
- [x] 2.7.10 泰卢固语页面 - 已添加完整Schema结构化数据
- [x] 2.7.11 所有语言页面Schema数据验证与优化 - 已完成

## 3. 后端开发（Next.js API Routes + Node.js 微服务）
### 3.1 核心API开发（Next.js API Routes）
- [x] 3.1.1 文本翻译API（`/api/translate`，小语种↔英文，自动检测）
- [x] 3.1.2 语言检测API（`/api/detect`，自动语种识别）
- [x] 3.1.3 语音合成API（`/api/tts`，英文TTS优先）
- [x] 3.1.4 用量统计与监控（内部使用）
- [x] 3.1.5 错误处理与用户友好提示
- [x] 3.1.6 双向翻译API增强（支持语言对参数，优化批量翻译）
- [x] 3.1.7 翻译方向智能切换API（自动检测翻译方向）
- [x] 3.1.8 语言对缓存策略优化（双向缓存键管理）

### 3.2 文件处理微服务（Node.js + Fastify）
- [x] 3.2.1 文件上传服务（`/upload`，支持PDF/Word/PPT）
- [x] 3.2.2 文本提取服务（`/extract`，多格式解析）
- [x] 3.2.3 文件翻译服务（`/translate`，异步处理）
- [x] 3.2.4 结果下载服务（`/download`，文件下载）
- [x] 3.2.5 任务队列与进度追踪
- [x] 3.2.6 微服务部署和测试完成

### 3.3 第三方服务集成
- [x] 3.3.1 Hugging Face NLLB云API集成（支持Mock模式和Fallback）
- [x] 3.3.2 TTS服务集成（Edge Speech/Google TTS + Mock模式）
- [x] 3.3.3 本地NLLB服务集成（作为云API的本地化备选方案）
- [ ] 3.3.4 邮件服务集成（Resend/SendGrid）
- [ ] 3.3.5 Creem付费能力集成（后续扩展）

### 3.4 数据层与缓存
- [x] 3.4.1 Vercel KV/Upstash Redis配置（翻译缓存，支持内存fallback）
- [ ] 3.4.2 MongoDB Atlas配置与数据结构设计（可选）
- [ ] 3.4.3 用户使用统计与分析
- [x] 3.4.4 翻译结果缓存策略

### 3.5 本地AI模型部署（NLLB）
- [x] 3.5.1 NLLB 600M模型下载与配置（2.46GB，支持16种语言）
- [x] 3.5.2 Python环境依赖配置（transformers 4.52.4、torch 2.7.1+cpu、sentencepiece）
- [x] 3.5.3 NLLB本地推理服务搭建（Fastify + Python脚本，端口8080）
- [x] 3.5.4 本地翻译API端点实现（/translate、/translate/batch、/health、/languages、/model/info）
- [x] 3.5.5 模型验证与功能测试（英语→海地克里奥尔语等翻译测试通过）
- [x] 3.5.6 本地服务启动脚本与部署文档（scripts/download_model.py）
- [ ] 3.5.7 本地服务与云API的负载均衡配置
- [ ] 3.5.8 本地模型服务的监控与日志系统
- [ ] 3.5.9 GPU加速配置（可选，提升推理性能）
- [ ] 3.5.10 Docker容器化部署配置

### 3.6 NLLB核心翻译功能实现（新增）
- [x] 3.6.1 NLLB本地服务环境配置与依赖安装（个人电脑部署方案）
- [x] 3.6.2 NLLB本地服务启动与健康检查验证（支持日1000次翻译）
- [x] 3.6.3 主服务翻译接口切换到本地NLLB优先模式
- [x] 3.6.4 翻译服务负载均衡机制验证（本地→云端→Mock→Fallback）
- [x] 3.6.5 前端翻译功能端到端测试（所有语言对）
- [x] 3.6.6 文档翻译服务与本地NLLB集成测试
- [x] 3.6.7 翻译缓存机制优化（减少重复推理）
- [x] 3.6.8 翻译性能优化（批处理、并发限制、内存管理）
- [x] 3.6.9 错误处理与降级策略完善
- [x] 3.6.10 本地翻译服务监控与日志系统
- [x] 3.6.11 双向翻译功能NLLB适配（所有语言对的双向翻译支持）
- [x] 3.6.12 语言切换功能后端逻辑实现（翻译方向动态切换）
- [x] 3.6.13 双向翻译性能优化（模型加载优化、语言对并发处理）

## 4. 测试与质量保障
- [x] 4.1 单元测试（前后端核心逻辑）
- [x] 4.2 集成测试（API端到端、文件翻译、TTS等）
- [x] 4.3 UI自动化测试
- [x] 4.4 性能与响应速度测试
- [x] 4.5 安全与合规性检查

### 4.6 NLLB翻译功能测试（新增）
- [x] 4.6.1 本地NLLB服务单元测试（单文本翻译、批量翻译）
- [x] 4.6.2 翻译质量评估测试（准确性、一致性、语法正确性）
- [x] 4.6.3 翻译性能基准测试（响应时间、吞吐量、并发处理）
- [x] 4.6.4 翻译服务容错测试（服务故障、网络中断、内存不足）
- [x] 4.6.5 前端翻译界面功能回归测试
- [x] 4.6.6 文档翻译端到端集成测试
- [x] 4.6.7 多语言翻译路径完整性测试
- [x] 4.6.8 翻译缓存机制有效性测试
- [x] 4.6.9 双向翻译功能完整性测试（所有语言对双向测试）
- [x] 4.6.10 语言切换功能用户体验测试（切换性能、状态保持）
- [x] 4.6.11 双向翻译页面SEO测试（所有反向页面的搜索引擎优化）

## 5. 部署与运维
- [x] 5.1 环境配置（开发、测试、生产）
- [x] 5.2 自动化部署脚本（CI/CD）
- [ ] 5.3 日志与监控
- [ ] 5.4 备份与恢复策略

### 5.5 NLLB本地服务运维（新增）
- [ ] 5.5.1 NLLB服务自动启动配置（开机自启、进程守护）
- [ ] 5.5.2 NLLB服务健康监控与告警
- [ ] 5.5.3 模型文件备份与版本管理
- [ ] 5.5.4 翻译服务负载监控与扩展策略
- [ ] 5.5.5 NLLB服务日志收集与分析
- [ ] 5.5.6 服务器资源使用优化（CPU、内存、存储）

---

## 后续扩展功能（V2计划）
### 开发者API服务
- [ ] API Key管理系统
- [ ] API限流与授权中间件
- [ ] 开发者文档站点
- [ ] API用量统计与计费
- [ ] REST API标准化设计

### 高级功能
- [ ] 用户账户系统与历史记录
- [ ] 图片OCR翻译（支持双向翻译）
- [ ] PPT文件翻译支持（支持双向翻译）
- [ ] 小语种TTS语音播放（双向语音支持）
- [ ] 多语种互译扩展（超越双向，支持小语种之间直接翻译）
- [ ] 对话式翻译界面（支持连续双向翻译对话）
- [ ] 翻译历史记录与双向查找功能

### 本地AI服务增强（V2计划）
- [ ] 更大规模NLLB模型部署（1.3B/3.3B参数版本）
- [ ] GPU集群部署与负载均衡
- [ ] 多模型热切换与A/B测试
- [ ] 本地TTS模型集成（支持小语种语音合成）
- [ ] 离线模式支持（完全本地化部署）
- [ ] 边缘计算节点部署（CDN + AI推理）

## 6. 用户系统开发（新增）
### 6.1 身份验证系统
- [ ] 6.1.1 NextAuth.js配置与集成（邮箱/密码登录、JWT、Session管理）
- [ ] 6.1.2 用户注册页面开发（/auth/signup - 邮箱验证、密码强度检查）
- [ ] 6.1.3 用户登录页面开发（/auth/signin - 记住我、错误处理）
- [ ] 6.1.4 邮箱验证系统（Resend集成、验证链接、重发机制）
- [ ] 6.1.5 密码重置功能（邮箱重置链接、安全验证）
- [ ] 6.1.6 社交登录集成（Google OAuth，可选功能）
- [ ] 6.1.7 登录状态管理（30天免登录、安全Session）
- [ ] 6.1.8 防暴力破解保护（登录限制、验证码）

### 6.2 用户数据存储
- [ ] 6.2.1 Prisma ORM配置与数据库设计
- [ ] 6.2.2 用户数据模型实现（User、Profile、CreditTransaction等）
- [ ] 6.2.3 PostgreSQL/SQLite数据库部署配置
- [ ] 6.2.4 数据库迁移脚本编写
- [ ] 6.2.5 用户数据安全存储（密码加密、敏感信息保护）
- [ ] 6.2.6 数据备份与恢复策略

### 6.3 用户权限管理
- [ ] 6.3.1 权限中间件开发（游客、注册用户、付费用户）
- [ ] 6.3.2 API路由权限保护
- [ ] 6.3.3 前端权限控制组件
- [ ] 6.3.4 管理员权限系统（可选）

## 7. 积分系统开发（新增）
### 7.1 积分计费系统
- [ ] 7.1.1 字符数计费逻辑实现（500字符免费，超出按0.1积分/字符）
- [ ] 7.1.2 积分余额检查中间件
- [ ] 7.1.3 积分消耗预估功能（翻译前显示预估费用）
- [ ] 7.1.4 积分扣费处理（翻译成功后扣费、失败回滚）
- [ ] 7.1.5 积分不足处理逻辑（充值引导、降级提示）

### 7.2 积分管理系统
- [ ] 7.2.1 积分交易记录模型实现
- [ ] 7.2.2 积分充值逻辑（支付成功后入账）
- [ ] 7.2.3 积分使用明细查询API
- [ ] 7.2.4 积分余额实时更新
- [ ] 7.2.5 积分有效期管理（可选功能）
- [ ] 7.2.6 积分赠送系统（注册奖励、推荐奖励）

### 7.3 定价策略配置
- [ ] 7.3.1 积分包定价配置系统（支持USD锚定）
- [ ] 7.3.2 优惠折扣计算逻辑
- [ ] 7.3.3 新用户激励机制（500积分注册奖励、首充20%奖励）
- [ ] 7.3.4 推荐奖励系统（推荐码生成、奖励发放）

## 8. 支付系统开发（新增）
### 8.1 Stripe集成
- [ ] 8.1.1 Stripe账户配置与API密钥管理
- [ ] 8.1.2 Stripe Checkout集成（托管式支付页面）
- [ ] 8.1.3 积分包产品配置（价格、描述、优惠）
- [ ] 8.1.4 支付会话创建API
- [ ] 8.1.5 支付成功回调处理
- [ ] 8.1.6 支付失败处理与重试机制

### 8.2 支付安全与合规
- [ ] 8.2.1 Stripe Webhook验证（签名验证、重放攻击防护）
- [ ] 8.2.2 支付幂等性处理（防重复充值）
- [ ] 8.2.3 支付数据加密存储
- [ ] 8.2.4 PCI DSS合规检查
- [ ] 8.2.5 退款处理系统
- [ ] 8.2.6 争议处理流程

### 8.3 支付流程优化
- [ ] 8.3.1 多币种支持（USD为主，本地货币显示）
- [ ] 8.3.2 支付方式扩展（Apple Pay、Google Pay）
- [ ] 8.3.3 支付确认邮件系统
- [ ] 8.3.4 发票生成与下载功能
- [ ] 8.3.5 支付统计与报表系统

## 9. 用户控制台开发（新增）
### 9.1 Dashboard页面
- [ ] 9.1.1 用户控制台主页设计与开发（/dashboard）
- [ ] 9.1.2 积分余额显示组件
- [ ] 9.1.3 使用历史统计图表（日/周/月）
- [ ] 9.1.4 积分使用明细列表
- [ ] 9.1.5 充值历史记录
- [ ] 9.1.6 使用量分析Dashboard

### 9.2 用户资料管理
- [ ] 9.2.1 用户资料页面开发（/profile）
- [ ] 9.2.2 基本信息编辑（邮箱、昵称、头像）
- [ ] 9.2.3 密码修改功能（旧密码验证、新密码强度检查）
- [ ] 9.2.4 邮箱验证状态管理
- [ ] 9.2.5 账户设置（通知偏好、语言偏好）
- [ ] 9.2.6 账户删除功能（GDPR合规）

### 9.3 积分管理界面
- [ ] 9.3.1 积分购买页面（/credits/purchase）
- [ ] 9.3.2 定价页面设计（/pricing）
- [ ] 9.3.3 积分使用记录详细页面
- [ ] 9.3.4 充值成功页面与确认
- [ ] 9.3.5 积分余额提醒系统
- [ ] 9.3.6 充值优惠促销页面

## 10. 翻译功能积分集成（新增）
### 10.1 文本翻译积分化
- [ ] 10.1.1 文本翻译页面积分集成（字符数实时计算）
- [ ] 10.1.2 积分消耗预估显示（翻译前提示）
- [ ] 10.1.3 积分不足时充值引导
- [ ] 10.1.4 免费额度进度条显示（500字符内）
- [ ] 10.1.5 长文本翻译确认弹窗（显示将扣费积分）

### 10.2 文档翻译积分化
- [ ] 10.2.1 文档翻译积分计费集成
- [ ] 10.2.2 文档字符数预估（上传后计算）
- [ ] 10.2.3 大文档翻译积分确认流程
- [ ] 10.2.4 免费用户文档大小限制（5MB vs 50MB）
- [ ] 10.2.5 文档翻译进度与积分扣费同步

### 10.3 语言页面积分集成
- [ ] 10.3.1 所有语言页面积分功能集成
- [ ] 10.3.2 页面右上角积分余额显示
- [ ] 10.3.3 未登录用户翻译限制（每天10次）
- [ ] 10.3.4 登录提示与注册引导
- [ ] 10.3.5 积分营销信息展示

## 11. 邮件系统开发（新增）
### 11.1 Resend邮件服务集成
- [ ] 11.1.1 Resend API配置与认证
- [ ] 11.1.2 邮件模板设计系统
- [ ] 11.1.3 邮箱验证邮件模板
- [ ] 11.1.4 密码重置邮件模板
- [ ] 11.1.5 支付确认邮件模板
- [ ] 11.1.6 积分余额提醒邮件

### 11.2 邮件发送逻辑
- [ ] 11.2.1 邮件队列系统（避免阻塞）
- [ ] 11.2.2 邮件发送失败重试机制
- [ ] 11.2.3 邮件发送记录与统计
- [ ] 11.2.4 邮件偏好设置（用户可控制）
- [ ] 11.2.5 邮件合规性检查（反垃圾邮件）

## 12. 安全与合规开发（新增）
### 12.1 数据安全
- [ ] 12.1.1 HTTPS强制配置
- [ ] 12.1.2 API Rate Limiting实现
- [ ] 12.1.3 SQL注入防护
- [ ] 12.1.4 XSS攻击防护
- [ ] 12.1.5 CSRF Token验证
- [ ] 12.1.6 敏感数据加密存储

### 12.2 隐私保护
- [ ] 12.2.1 用户数据最小化收集
- [ ] 12.2.2 翻译内容不存储策略
- [ ] 12.2.3 用户数据匿名化处理
- [ ] 12.2.4 数据删除API实现
- [ ] 12.2.5 隐私政策页面开发
- [ ] 12.2.6 Cookie使用说明

### 12.3 合规要求
- [ ] 12.3.1 GDPR合规实现（数据导出、删除权利）
- [ ] 12.3.2 CCPA合规检查
- [ ] 12.3.3 服务条款页面开发
- [ ] 12.3.4 用户协议接受流程
- [ ] 12.3.5 合规性审计日志
- [ ] 12.3.6 数据保护影响评估

## 13. 用户界面增强（更新现有任务）
### 13.1 导航栏用户系统集成
- [ ] 13.1.1 登录/注册按钮添加
- [ ] 13.1.2 用户头像下拉菜单
- [ ] 13.1.3 积分余额显示组件
- [ ] 13.1.4 快速充值入口
- [ ] 13.1.5 用户状态响应式显示

### 13.2 翻译界面用户体验
- [ ] 13.2.1 积分消耗实时提示
- [ ] 13.2.2 免费额度进度条
- [ ] 13.2.3 登录引导弹窗
- [ ] 13.2.4 充值引导动画
- [ ] 13.2.5 翻译历史本地存储（未登录用户）

### 13.3 响应式设计优化
- [ ] 13.3.1 移动端用户系统界面适配
- [ ] 13.3.2 积分管理移动端优化
- [ ] 13.3.3 支付流程移动端体验
- [ ] 13.3.4 用户控制台移动端适配 