# Tests Directory

è¿™é‡ŒåŒ…å«äº† Transly é¡¹ç›®çš„æ‰€æœ‰æµ‹è¯•ä»£ç ï¼Œé‡‡ç”¨åˆ†å±‚æµ‹è¯•æ¶æ„ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
tests/
â”œâ”€â”€ unit/                    # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ frontend/           # å‰ç«¯ç»„ä»¶å’Œå·¥å…·æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ components/     # Reactç»„ä»¶æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ services/       # æœåŠ¡å±‚æµ‹è¯•
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°æµ‹è¯•
â”‚   â””â”€â”€ backend/            # åç«¯é€»è¾‘æµ‹è¯•
â”‚       â”œâ”€â”€ api/            # APIè·¯ç”±æµ‹è¯•
â”‚       â””â”€â”€ services/       # å¾®æœåŠ¡æµ‹è¯•
â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ api/                # APIç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ services/           # æœåŠ¡é—´é›†æˆæµ‹è¯•
â”œâ”€â”€ e2e/                    # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ features/           # åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ performance/        # æ€§èƒ½æµ‹è¯•
â”‚   â””â”€â”€ security/           # å®‰å…¨æµ‹è¯•
â”œâ”€â”€ fixtures/               # æµ‹è¯•æ•°æ®å’Œå›ºå®šè£…ç½®
â”‚   â”œâ”€â”€ files/              # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ data/               # æµ‹è¯•æ•°æ®
â””â”€â”€ config/                 # æµ‹è¯•é…ç½®
    â”œâ”€â”€ jest/               # Jesté…ç½®
    â”œâ”€â”€ playwright/         # Playwrighté…ç½®
    â””â”€â”€ setup/              # æµ‹è¯•ç¯å¢ƒè®¾ç½®
```

## ğŸ§ª æµ‹è¯•ç±»å‹

### å•å…ƒæµ‹è¯• (Unit Tests)
- **ä½ç½®**: `tests/unit/`
- **å·¥å…·**: Jest + React Testing Library
- **ç›®æ ‡**: æµ‹è¯•ç‹¬ç«‹çš„å‡½æ•°ã€ç»„ä»¶å’Œæ¨¡å—
- **è¦†ç›–ç‡**: è¦æ±‚ â‰¥ 70%

### é›†æˆæµ‹è¯• (Integration Tests)  
- **ä½ç½®**: `tests/integration/`
- **å·¥å…·**: Jest + Supertest
- **ç›®æ ‡**: æµ‹è¯•æ¨¡å—é—´çš„äº¤äº’å’Œæ•°æ®æµ
- **é‡ç‚¹**: APIé›†æˆã€æ•°æ®åº“äº¤äº’ã€æœåŠ¡é€šä¿¡

### ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests)
- **ä½ç½®**: `tests/e2e/`
- **å·¥å…·**: Playwright
- **ç›®æ ‡**: æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹
- **è¦†ç›–**: å¤šæµè§ˆå™¨ã€ç§»åŠ¨ç«¯ã€æ€§èƒ½ã€å®‰å…¨

## ğŸš€ è¿è¡Œæµ‹è¯•

### å¿«é€Ÿå¼€å§‹
```bash
# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:all

# è¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•
npm run test:unit          # å•å…ƒæµ‹è¯•
npm run test:integration   # é›†æˆæµ‹è¯•
npm run test:e2e          # E2Eæµ‹è¯•
npm run test:performance  # æ€§èƒ½æµ‹è¯•
npm run test:security     # å®‰å…¨æµ‹è¯•
```

### å¼€å‘æ¨¡å¼
```bash
# ç›‘å¬æ¨¡å¼è¿è¡Œå•å…ƒæµ‹è¯•
npm run test:unit:watch

# å¯è§†åŒ–æ¨¡å¼è¿è¡ŒE2Eæµ‹è¯•
npm run test:e2e:ui

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

## ğŸ”§ é…ç½®æ–‡ä»¶

### Jesté…ç½®
- **å‰ç«¯**: `tests/config/jest/frontend.config.js`
- **åç«¯**: `tests/config/jest/backend.config.js`
- **é€šç”¨**: `tests/config/jest/common.config.js`

### Playwrighté…ç½®
- **ä¸»é…ç½®**: `tests/config/playwright/playwright.config.ts`
- **ç¯å¢ƒé…ç½®**: `tests/config/playwright/environments/`

## ğŸ“‹ æµ‹è¯•è§„èŒƒ

### å‘½åçº¦å®š
- å•å…ƒæµ‹è¯•: `*.test.{js,ts,tsx}`
- é›†æˆæµ‹è¯•: `*.integration.{js,ts}`
- E2Eæµ‹è¯•: `*.spec.{js,ts}`

### æ–‡ä»¶ç»„ç»‡
- æµ‹è¯•æ–‡ä»¶åº”ä¸è¢«æµ‹è¯•æ–‡ä»¶æœ‰ç›¸åŒçš„ç›®å½•ç»“æ„
- æ¯ä¸ªæµ‹è¯•æ–‡ä»¶åº”ä¸“æ³¨äºæµ‹è¯•ä¸€ä¸ªæ¨¡å—æˆ–åŠŸèƒ½
- ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°å’Œåˆ†ç»„

### æœ€ä½³å®è·µ
1. **AAAæ¨¡å¼**: Arrange(å‡†å¤‡) â†’ Act(æ‰§è¡Œ) â†’ Assert(æ–­è¨€)
2. **ç‹¬ç«‹æ€§**: æ¯ä¸ªæµ‹è¯•åº”è¯¥ç‹¬ç«‹è¿è¡Œ
3. **å¯è¯»æ€§**: æµ‹è¯•åº”è¯¥ä½œä¸ºæ–‡æ¡£æ¥é˜…è¯»
4. **è¦†ç›–ç‡**: å…³æ³¨è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯æƒ…å†µ
5. **æ€§èƒ½**: ä¿æŒæµ‹è¯•è¿è¡Œå¿«é€Ÿ

## ğŸ” è°ƒè¯•æµ‹è¯•

### å¸¸ç”¨è°ƒè¯•æ–¹æ³•
```bash
# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
npm run test:unit -- specific-test.test.js

# è°ƒè¯•æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:debug

# ç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Š
npm run test:verbose
```

### Playwrightè°ƒè¯•
```bash
# å¤´æ˜¾æ¨¡å¼è¿è¡ŒE2Eæµ‹è¯•
npm run test:e2e:headed

# é€æ­¥è°ƒè¯•æ¨¡å¼
npm run test:e2e:debug

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
npm run test:e2e:report
```

## ğŸ“Š CI/CDé›†æˆ

æµ‹è¯•åœ¨ä»¥ä¸‹æƒ…å†µä¸‹è‡ªåŠ¨è¿è¡Œï¼š
- æ¯æ¬¡ `git push`
- Pull Request åˆ›å»ºå’Œæ›´æ–°
- å®šæ—¶ä»»åŠ¡ (æ¯æ—¥æ„å»º)

### GitHub Actions
- **å·¥ä½œæµ**: `.github/workflows/test.yml`
- **å¹¶è¡Œæ‰§è¡Œ**: ä¸åŒç±»å‹çš„æµ‹è¯•å¹¶è¡Œè¿è¡Œ
- **æŠ¥å‘Šç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šå’Œè¦†ç›–ç‡æ•°æ®
- **å¤±è´¥é€šçŸ¥**: æµ‹è¯•å¤±è´¥æ—¶è‡ªåŠ¨é€šçŸ¥

## ğŸ› ï¸ ç»´æŠ¤æŒ‡å—

### æ·»åŠ æ–°æµ‹è¯•
1. ç¡®å®šæµ‹è¯•ç±»å‹ï¼ˆå•å…ƒ/é›†æˆ/E2Eï¼‰
2. åœ¨ç›¸åº”ç›®å½•åˆ›å»ºæµ‹è¯•æ–‡ä»¶
3. éµå¾ªå‘½åå’Œç»“æ„çº¦å®š
4. æ›´æ–°ç›¸å…³é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰

### æ›´æ–°æµ‹è¯•é…ç½®
1. ä¿®æ”¹å¯¹åº”çš„é…ç½®æ–‡ä»¶
2. æ›´æ–°æ–‡æ¡£
3. è¿è¡Œæµ‹è¯•ç¡®ä¿é…ç½®æ­£ç¡®
4. æäº¤å˜æ›´

### æ€§èƒ½ä¼˜åŒ–
- å®šæœŸæ£€æŸ¥æµ‹è¯•è¿è¡Œæ—¶é—´
- ä¼˜åŒ–æ…¢é€Ÿæµ‹è¯•
- åˆç†ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œ
- æ¸…ç†ä¸å¿…è¦çš„æµ‹è¯•æ•°æ® 