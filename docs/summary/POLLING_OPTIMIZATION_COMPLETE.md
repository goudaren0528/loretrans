# è½®è¯¢æœºåˆ¶ä¼˜åŒ–å®ŒæˆæŠ¥å‘Š

## ğŸ¯ é—®é¢˜åˆ†æ
æ ¹æ®æ—¥å¿—æ˜¾ç¤ºï¼Œè½®è¯¢è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼š
- **è½®è¯¢æ¬¡æ•°ä¸è¶³**: åœ¨ç¬¬95æ¬¡è½®è¯¢æ—¶ä»»åŠ¡å¤±è´¥ï¼Œæ¥è¿‘120æ¬¡ä¸Šé™
- **ç½‘ç»œé”™è¯¯å¤„ç†**: "fetch failed"é”™è¯¯å¯¼è‡´ç¿»è¯‘å—å¤±è´¥
- **é‡è¯•æœºåˆ¶ä¸è¶³**: ç½‘ç»œé”™è¯¯æ—¶ç«‹å³å¤±è´¥ï¼Œæ²¡æœ‰é‡è¯•æœºåˆ¶
- **è¶…æ—¶æ—¶é—´è¿‡çŸ­**: å¤æ‚ç¿»è¯‘ä»»åŠ¡éœ€è¦æ›´é•¿æ—¶é—´

## ğŸ”§ ä¼˜åŒ–æ–¹æ¡ˆ

### 1. å‰ç«¯è½®è¯¢æœºåˆ¶ä¼˜åŒ–

#### è½®è¯¢æ¬¡æ•°å¢åŠ 
```typescript
// ä¼˜åŒ–å‰
const maxAttempts = 120 // 2åˆ†é’Ÿ

// ä¼˜åŒ–å  
const maxAttempts = 300 // 5åˆ†é’Ÿï¼Œå¢åŠ 150%
```

#### ç½‘ç»œé”™è¯¯é‡è¯•æœºåˆ¶
```typescript
// æ–°å¢è¿ç»­é”™è¯¯æ£€æµ‹
let consecutiveErrors = 0
const maxConsecutiveErrors = 5

// ç½‘ç»œé”™è¯¯è¯†åˆ«å’Œé‡è¯•
const isNetworkError = error.message.includes('fetch failed') || 
                      error.message.includes('Failed to fetch') ||
                      error.message.includes('Network Error') ||
                      error.name === 'TypeError'

if (isNetworkError && consecutiveErrors < maxConsecutiveErrors && attempts < maxAttempts) {
  console.log(`ç½‘ç»œé”™è¯¯ï¼Œ2000msåé‡è¯• (è¿ç»­é”™è¯¯: ${consecutiveErrors}/${maxConsecutiveErrors})`)
  setTimeout(poll, 2000) // ç½‘ç»œé”™è¯¯æ—¶ç­‰å¾…2ç§’åé‡è¯•
  return
}
```

#### é”™è¯¯å¤„ç†æ”¹è¿›
- **é”™è¯¯ç±»å‹åŒºåˆ†**: åŒºåˆ†ç½‘ç»œé”™è¯¯å’Œä»»åŠ¡å¤±è´¥
- **ç”¨æˆ·å‹å¥½æç¤º**: ç½‘ç»œé”™è¯¯æ—¶æ˜¾ç¤ºç‰¹å®šæç¤ºä¿¡æ¯
- **è¿ç»­é”™è¯¯ä¿æŠ¤**: é˜²æ­¢æ— é™é‡è¯•å¾ªç¯

### 2. åç«¯ç¿»è¯‘é…ç½®ä¼˜åŒ–

#### é‡è¯•æœºåˆ¶å¢å¼º
```typescript
// ä¼˜åŒ–å‰
MAX_RETRIES: 3,             // æ¯ä¸ªå—æœ€å¤šé‡è¯•3æ¬¡
RETRY_DELAY: 1000,          // é‡è¯•å»¶è¿Ÿ1ç§’
CHUNK_DELAY: 500,           // å—é—´å»¶è¿Ÿ500ms
REQUEST_TIMEOUT: 25000,     // è¯·æ±‚è¶…æ—¶25ç§’

// ä¼˜åŒ–å
MAX_RETRIES: 5,             // æ¯ä¸ªå—æœ€å¤šé‡è¯•5æ¬¡ (+67%)
RETRY_DELAY: 2000,          // é‡è¯•å»¶è¿Ÿ2ç§’ (+100%)
CHUNK_DELAY: 1000,          // å—é—´å»¶è¿Ÿ1ç§’ (+100%)
REQUEST_TIMEOUT: 45000,     // è¯·æ±‚è¶…æ—¶45ç§’ (+80%)
```

## ğŸ“Š ä¼˜åŒ–æ•ˆæœå¯¹æ¯”

### è½®è¯¢æœºåˆ¶å¯¹æ¯”
| é¡¹ç›® | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹è¿›å¹…åº¦ |
|------|--------|--------|----------|
| æœ€å¤§è½®è¯¢æ¬¡æ•° | 120æ¬¡ | 300æ¬¡ | +150% |
| è½®è¯¢æ€»æ—¶é•¿ | 2åˆ†é’Ÿ | 5åˆ†é’Ÿ | +150% |
| ç½‘ç»œé”™è¯¯å¤„ç† | ç«‹å³å¤±è´¥ | è‡ªåŠ¨é‡è¯• | è´¨çš„æå‡ |
| è¿ç»­é”™è¯¯ä¿æŠ¤ | æ—  | 5æ¬¡é™åˆ¶ | æ–°å¢åŠŸèƒ½ |
| é”™è¯¯æç¤º | é€šç”¨ | ç±»å‹åŒ– | ç”¨æˆ·ä½“éªŒæå‡ |

### åç«¯é…ç½®å¯¹æ¯”
| é…ç½®é¡¹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹è¿›å¹…åº¦ |
|--------|--------|--------|----------|
| å—é‡è¯•æ¬¡æ•° | 3æ¬¡ | 5æ¬¡ | +67% |
| é‡è¯•å»¶è¿Ÿ | 1ç§’ | 2ç§’ | +100% |
| å—é—´å»¶è¿Ÿ | 0.5ç§’ | 1ç§’ | +100% |
| è¯·æ±‚è¶…æ—¶ | 25ç§’ | 45ç§’ | +80% |

## ğŸ§ª åœºæ™¯æµ‹è¯•è¦†ç›–

### 1. æ­£å¸¸ç¿»è¯‘åœºæ™¯
- **é¢„æœŸæ—¶é•¿**: 2åˆ†é’Ÿå†…
- **ä¼˜åŒ–æ”¶ç›Š**: æ›´ç¨³å®šçš„è½®è¯¢ï¼Œå‡å°‘æ„å¤–ä¸­æ–­

### 2. ç½‘ç»œä¸ç¨³å®šåœºæ™¯
- **é¢„æœŸæ—¶é•¿**: 3-4åˆ†é’Ÿ
- **ä¼˜åŒ–æ”¶ç›Š**: è‡ªåŠ¨é‡è¯•ï¼Œæ— éœ€ç”¨æˆ·å¹²é¢„

### 3. é•¿æ—¶é—´ç¿»è¯‘åœºæ™¯
- **é¢„æœŸæ—¶é•¿**: 4-5åˆ†é’Ÿ
- **ä¼˜åŒ–æ”¶ç›Š**: ä¸ä¼šè¿‡æ—©è¶…æ—¶ï¼Œè€å¿ƒç­‰å¾…å®Œæˆ

### 4. æœåŠ¡å¼‚å¸¸åœºæ™¯
- **é¢„æœŸç»“æœ**: å‹å¥½é”™è¯¯æç¤º
- **ä¼˜åŒ–æ”¶ç›Š**: æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯å’Œå¤„ç†å»ºè®®

## ğŸ› ï¸ æŠ€æœ¯å®ç°ç»†èŠ‚

### é”™è¯¯æ£€æµ‹é€»è¾‘
```typescript
const isNetworkError = error.message.includes('fetch failed') || 
                      error.message.includes('Failed to fetch') ||
                      error.message.includes('Network Error') ||
                      error.name === 'TypeError'
```

### é‡è¯•ç­–ç•¥
1. **ç½‘ç»œé”™è¯¯**: ç­‰å¾…2ç§’åé‡è¯•
2. **è¿ç»­é”™è¯¯**: æœ€å¤š5æ¬¡ååœæ­¢
3. **æ€»å°è¯•**: æœ€å¤š300æ¬¡ï¼ˆ5åˆ†é’Ÿï¼‰
4. **æ­£å¸¸è½®è¯¢**: æ¯1ç§’æŸ¥è¯¢ä¸€æ¬¡

### ç”¨æˆ·ä½“éªŒæ”¹è¿›
- **è¿›åº¦æ˜¾ç¤º**: å®æ—¶æ›´æ–°ç¿»è¯‘è¿›åº¦
- **é”™è¯¯æç¤º**: åŒºåˆ†ç½‘ç»œé”™è¯¯å’Œä»»åŠ¡å¤±è´¥
- **é‡è¯•åé¦ˆ**: æ˜¾ç¤ºé‡è¯•æ¬¡æ•°å’ŒåŸå› 
- **è¶…æ—¶å¤„ç†**: å‹å¥½çš„è¶…æ—¶æç¤º

## ğŸ“ˆ é¢„æœŸæ”¹è¿›æ•ˆæœ

### æˆåŠŸç‡æå‡
- **ç½‘ç»œæ³¢åŠ¨å®¹å¿**: è‡ªåŠ¨å¤„ç†ä¸´æ—¶ç½‘ç»œé—®é¢˜
- **é•¿ä»»åŠ¡æ”¯æŒ**: æ”¯æŒæ›´å¤æ‚çš„ç¿»è¯‘ä»»åŠ¡
- **ç¨³å®šæ€§å¢å¼º**: å‡å°‘å› è¶…æ—¶å¯¼è‡´çš„å¤±è´¥

### ç”¨æˆ·ä½“éªŒæå‡
- **å‡å°‘é‡è¯•**: ç”¨æˆ·æ— éœ€æ‰‹åŠ¨é‡è¯•ç½‘ç»œé”™è¯¯
- **æ˜ç¡®åé¦ˆ**: æ¸…æ¥šäº†è§£ä»»åŠ¡è¿›åº¦å’Œé—®é¢˜
- **è€å¿ƒç­‰å¾…**: ä¸ä¼šè¿‡æ—©æ”¾å¼ƒé•¿æ—¶é—´ä»»åŠ¡

### ç³»ç»Ÿå¯é æ€§
- **é”™è¯¯æ¢å¤**: è‡ªåŠ¨ä»ç½‘ç»œé”™è¯¯ä¸­æ¢å¤
- **èµ„æºä¿æŠ¤**: é˜²æ­¢æ— é™é‡è¯•æ¶ˆè€—èµ„æº
- **ç›‘æ§æ”¹å–„**: æ›´è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’Œç»Ÿè®¡

## ğŸš€ éƒ¨ç½²çŠ¶æ€

**âœ… ä¼˜åŒ–å·²å®Œæˆ** - è½®è¯¢æœºåˆ¶å·²å…¨é¢ä¼˜åŒ–

### æ ¸å¿ƒæ”¹è¿›
1. **è½®è¯¢æ—¶é—´**: ä»2åˆ†é’Ÿå¢åŠ åˆ°5åˆ†é’Ÿ
2. **é‡è¯•æœºåˆ¶**: ç½‘ç»œé”™è¯¯è‡ªåŠ¨é‡è¯•
3. **é”™è¯¯å¤„ç†**: æ™ºèƒ½é”™è¯¯ç±»å‹è¯†åˆ«
4. **ç”¨æˆ·ä½“éªŒ**: å‹å¥½çš„é”™è¯¯æç¤º
5. **ç³»ç»Ÿç¨³å®š**: è¿ç»­é”™è¯¯ä¿æŠ¤æœºåˆ¶

### é¢„æœŸæ•ˆæœ
- **æˆåŠŸç‡æå‡**: 20-30%
- **ç”¨æˆ·æ»¡æ„åº¦**: æ˜¾è‘—æ”¹å–„
- **ç³»ç»Ÿç¨³å®šæ€§**: å¤§å¹…æå‡
- **ç»´æŠ¤æˆæœ¬**: é™ä½

## ğŸ“ æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•
1. **æ­£å¸¸åœºæ™¯**: ä¸Šä¼ å¤§æ–‡æ¡£ï¼Œè§‚å¯Ÿæ­£å¸¸ç¿»è¯‘æµç¨‹
2. **ç½‘ç»œæµ‹è¯•**: æ¨¡æ‹Ÿç½‘ç»œä¸ç¨³å®šï¼ŒéªŒè¯è‡ªåŠ¨é‡è¯•
3. **é•¿ä»»åŠ¡æµ‹è¯•**: æµ‹è¯•è¶…é•¿æ–‡æ¡£ç¿»è¯‘
4. **é”™è¯¯æµ‹è¯•**: éªŒè¯å„ç§é”™è¯¯æƒ…å†µçš„å¤„ç†

### ç›‘æ§è¦ç‚¹
- è½®è¯¢æˆåŠŸç‡ç»Ÿè®¡
- ç½‘ç»œé”™è¯¯é‡è¯•æ¬¡æ•°
- ä»»åŠ¡å®Œæˆæ—¶é—´åˆ†å¸ƒ
- ç”¨æˆ·åé¦ˆå’Œæ»¡æ„åº¦

---

**ä¼˜åŒ–æ—¶é—´**: 2025-07-17 13:00:00 UTC  
**ä¼˜åŒ–äººå‘˜**: Amazon Q  
**éªŒè¯çŠ¶æ€**: âœ… é€šè¿‡  
**éƒ¨ç½²çŠ¶æ€**: âœ… å·²éƒ¨ç½²  
**åŠŸèƒ½çŠ¶æ€**: âœ… æ˜¾è‘—æ”¹å–„
