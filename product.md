# 🧩 产品名称：Transly — Translate Low-Resource Languages to English

## 🌟 产品愿景与使命
- **愿景**: 成为全球小语种用户与世界沟通的桥梁
- **使命**: 让每一种语言都能被理解，让每个声音都能被听见
- **价值主张**: 专业、准确、易用的小语种翻译服务，专注Google Translate等主流工具覆盖不足的语言

## 🎯 产品定位
为全球小语种用户提供精准、高可用的"翻译成英文"工具，覆盖 20+ 低竞争语言，基于 Meta NLLB 模型，兼顾 SEO 流量与实用翻译体验。

## 👥 核心用户群体
```
精准用户画像：
┌─────────────────────────────────────────────────────────────────┐
│ 用户类型      核心痛点            解决方案        商业价值        │
├─────────────────────────────────────────────────────────────────┤
│ 学术研究者    小语种文献翻译      高质量翻译      高频付费用户    │
│ 移民群体      官方文件翻译        准确性保证      刚需用户        │
│ 跨境电商      产品描述本地化      批量翻译        企业客户        │
│ 语言学习者    学习材料翻译        教育功能        长期用户        │
│ NGO工作者     多语种沟通需求      实时翻译        订阅用户        │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🏗️ 产品结构

### 1. 多语种独立 Landing Pages
#### 1.1 小语种到英文翻译页面
- `/creole-to-english` - 海地克里奥尔语翻译页面（已完成）
- `/lao-to-english` - 老挝语翻译页面（已完成）
- `/swahili-to-english` - 斯瓦希里语翻译页面（已完成）
- `/burmese-to-english` - 缅甸语翻译页面（已完成）
- `/telugu-to-english` - 泰卢固语翻译页面（已完成）

#### 1.2 英文到小语种翻译页面（新增）
- `/english-to-creole` - 英文到海地克里奥尔语翻译页面
- `/english-to-lao` - 英文到老挝语翻译页面
- `/english-to-swahili` - 英文到斯瓦希里语翻译页面
- `/english-to-burmese` - 英文到缅甸语翻译页面
- `/english-to-telugu` - 英文到泰卢固语翻译页面

#### 1.3 特殊功能
- 每个页面都包含语言切换按钮，支持双向翻译切换
- 独立SEO优化，包含完整的Schema.org结构化数据
- 暂不支持的语言显示"Coming Soon"页面
- 页面间相互链接，提升用户体验和SEO价值

### 2. 首页 `/`
- 产品介绍与品牌展示
- 多种翻译形式概览（Text翻译、Document翻译、图片翻译Coming Soon）
- 推荐翻译语言入口
- FAQ
- 站点地图/所有语种链接集合

### 3. 文本翻译页面 `/text-translate`
- 独立的文本翻译功能页面
- 语言选择器与翻译界面
- 翻译历史记录（本地存储）
- 快捷复制与TTS功能

### 4. 关于页面 `/about`
- 产品介绍与优势
- 支持的语言列表
- 使用帮助与FAQ

### 5. 用户系统页面（新增）
- `/auth/signin` - 登录页面
- `/auth/signup` - 注册页面
- `/auth/verify` - 邮箱验证页面
- `/dashboard` - 用户控制台
- `/pricing` - 定价页面
- `/credits/purchase` - 积分充值页面
- `/profile` - 用户资料页面

---

## 🔐 用户系统与身份验证

### 身份验证方案
**技术方案：Supabase Auth + Supabase PostgreSQL**
- **Supabase Auth**：现代化身份验证服务
  - 邮箱/密码登录
  - 社交登录（Google、GitHub等，可选）
  - JWT令牌管理
  - Session管理
  - 内置安全最佳实践
  - 免费额度：50,000 月活用户
- **Supabase PostgreSQL**：云端数据库服务
  - 免费额度：500MB数据库存储
  - 实时数据同步
  - 自动备份
- **Resend**：邮件发送服务（低优先级）
  - 免费额度：3000封邮件/月
  - 邮箱验证、密码重置（后期添加）

### 用户注册流程
1. **邮箱注册**：用户输入邮箱地址和密码
2. **邮箱验证**：发送验证链接到用户邮箱
3. **账户激活**：点击验证链接激活账户
4. **初始积分**：新用户获得500积分（用于体验付费功能）
5. **用户引导**：介绍产品功能和积分使用方式

### 登录系统
- **邮箱/密码登录**：标准登录方式
- **社交登录**：Google OAuth（可选，后期添加）
- **记住我功能**：30天免登录
- **密码重置**：通过邮箱重置密码
- **登录限制**：防暴力破解保护

### 用户权限管理
- **游客用户**：500字符以下免费翻译
- **注册用户**：500字符以下免费翻译 + 初始积分
- **付费用户**：基于积分的翻译服务
- **管理员**：后台管理权限（可选）

---

## 💰 积分系统与付费策略

### 积分制度设计
#### 积分计费规则
- **短文本翻译（≤500字符）**：免费，无需积分
- **长文本翻译（>500字符）**：付费，按字符数消耗积分
- **计费公式**：超出部分字符数 × 0.1积分/字符
- **最小扣费**：50积分（500字符以上的最小扣费）

#### 积分定价体系（快速上线版）
```
简化的3层定价结构（便于快速测试）：
┌─────────────────────────────────────────────────────────────────┐
│ 套餐        积分      价格     原价     折扣    目标用户          │
├─────────────────────────────────────────────────────────────────┤
│ Starter     2,500     $5       $5       0%      轻度用户/学生    │
│ Basic       6,000     $10      $12      17%     个人用户(推荐)   │
│ Pro         20,000    $25      $30      17%     专业用户/小企业  │
└─────────────────────────────────────────────────────────────────┘

价值计算：
- 300字符以下翻译完全免费
- 超出部分：0.1积分/字符（即每1000字符消耗100积分）
- Starter套餐可翻译约25万字符
- Basic套餐可翻译约60万字符（最受欢迎）
- Pro套餐可翻译约200万字符

上线后扩展：
- 根据用户反馈和数据，考虑增加Business($50)和Enterprise($120)套餐
- 基于真实使用数据优化积分消耗比例
```
```

#### 新用户激励优化
- **注册奖励**: 500积分（约$2价值，可翻译5万字符）
- **首次充值奖励**: 
  - Starter套餐: 额外赠送500积分（20%奖励）
  - Basic套餐: 额外赠送1200积分（20%奖励）
  - Pro套餐及以上: 额外赠送25%积分
- **推荐奖励**: 
  - 推荐人: 成功推荐获得300积分
  - 被推荐人: 注册后额外获得200积分
- **早期用户福利**: 前1000名注册用户永久享受10%充值折扣

#### 用户留存机制
##### 忠诚度计划
```
用户等级系统：
┌─────────────────────────────────────────────────────────────────┐
│ 等级      累计消费    积分奖励率   专属权益                      │
├─────────────────────────────────────────────────────────────────┤
│ 铜牌      $10-49      +5%         生日积分奖励                  │
│ 银牌      $50-199     +10%        优先客服支持                  │
│ 金牌      $200-499    +15%        新功能抢先体验                │
│ 钻石      $500+       +20%        专属客户经理                  │
└─────────────────────────────────────────────────────────────────┘
```

##### 月度订阅选项（可选）
```
订阅套餐（月付模式）：
┌─────────────────────────────────────────────────────────────────┐
│ 套餐名称    月费(USD)   月度积分   年付优惠   适用用户            │
├─────────────────────────────────────────────────────────────────┤
│ 基础月付    $12        7200积分    2个月免费  稳定需求用户        │
│ 专业月付    $30        25000积分   2个月免费  专业用户/小团队     │
│ 企业月付    $80        70000积分   2个月免费  企业用户            │
└─────────────────────────────────────────────────────────────────┘

订阅优势：
- 每月自动充值，无需手动购买
- 订阅用户享受额外10%积分奖励
- 优先客服支持和新功能访问
- 可随时取消，剩余积分保留
```

### 付费功能限制
#### 文本翻译限制
- **免费用户**：500字符以下无限次翻译
- **付费用户**：超过500字符部分按积分计费
- **未登录用户**：500字符以下，每天最多10次翻译

### 免费策略优化（快速上线版）

#### 未登录用户限制（收紧策略）
- **每日限制**: 3次翻译请求（降低以鼓励注册）
- **字符限制**: 每次最多200字符（突出注册价值）
- **重置时间**: 每日UTC 00:00重置计数
- **功能限制**: 
  - 仅支持文本翻译
  - 不支持语音播放
  - 不保存翻译历史
  - 显示"注册获得更多免费额度"提示

#### 注册用户免费额度（平衡策略）
- **基础免费**: 300字符以下无限次翻译（降低以提升付费转化）
- **新用户奖励**: 500积分（约$2价值，可翻译5万字符）
- **每周补充**: 50积分免费补充（保持用户活跃）
- **功能权限**:
  - 支持所有翻译功能
  - 语音播放功能
  - 翻译历史保存（7天）

#### 付费转化引导（关键优化）
```
智能转化时机：
┌─────────────────────────────────────────────────────────────────┐
│ 触发条件          引导策略              预期转化率              │
├─────────────────────────────────────────────────────────────────┤
│ 首次超300字符     显示积分消耗提示      建立付费认知            │
│ 积分余额<100      推荐Starter套餐       首次付费转化12%         │
│ 连续3天使用       显示使用统计+优惠     活跃用户转化20%         │
│ 积分用完80%       智能续费提醒          复购转化45%             │
└─────────────────────────────────────────────────────────────────┘
```

#### 文档翻译限制
- **免费用户**：仅支持500字符以下的文档（约1页）
- **付费用户**：完整文档翻译，按提取文本字符数计费
- **文档大小限制**：免费用户5MB，付费用户50MB
- **未登录用户**：不支持文档翻译功能

### 付费功能差异化

#### 套餐功能对比
```
功能特性对比表：
┌─────────────────────────────────────────────────────────────────┐
│ 功能特性          免费用户    Starter    Basic     Pro    Business │
├─────────────────────────────────────────────────────────────────┤
│ 文本翻译(≤500字符)   ✅无限      ✅无限      ✅无限     ✅无限    ✅无限   │
│ 长文本翻译          ❌需积分     ✅2.5K积分   ✅6K积分   ✅20K积分  ✅50K积分 │
│ 文档翻译            ❌不支持     ✅支持      ✅支持     ✅支持    ✅支持   │
│ 语音播放(TTS)       ❌限制      ✅支持      ✅支持     ✅支持    ✅支持   │
│ 翻译历史保存        ❌不保存     ✅7天       ✅30天     ✅90天    ✅无限   │
│ 批量翻译            ❌不支持     ❌不支持     ❌不支持    ✅支持    ✅支持   │
│ API访问             ❌不支持     ❌不支持     ❌不支持    ✅基础    ✅完整   │
│ 优先处理            ❌标准      ❌标准      ✅优先     ✅优先    ✅最高   │
│ 技术支持            ❌社区      ❌邮件      ✅邮件     ✅优先    ✅专属   │
│ 文件大小限制        ❌不支持     5MB        10MB      50MB     100MB  │
│ 团队管理            ❌不支持     ❌不支持     ❌不支持    ❌不支持   ✅支持   │
└─────────────────────────────────────────────────────────────────┘
```

#### 使用场景推荐
```
用户画像与套餐推荐：
┌─────────────────────────────────────────────────────────────────┐
│ 用户类型        月使用量      推荐套餐    使用场景                │
├─────────────────────────────────────────────────────────────────┤
│ 学生用户        1-5K字符     Starter     学术论文、作业翻译      │
│ 个人博主        5-15K字符    Basic       博客内容、社交媒体      │
│ 自由职业者      15-50K字符   Pro         客户文档、商务翻译      │
│ 小型企业        50-150K字符  Business    产品文档、营销材料      │
│ 大型企业        150K+字符    Enterprise  大规模内容本地化        │
└─────────────────────────────────────────────────────────────────┘
```

#### 智能推荐系统
- **使用量追踪**: 自动记录用户翻译字符数和频次
- **套餐建议**: 基于历史使用量推荐最适合的套餐
- **成本优化**: 显示当前使用模式下各套餐的成本效益
- **升级提醒**: 当使用量接近套餐上限时智能提醒升级

#### 积分不足处理
1. **提示机制**：翻译前检查积分余额，不足时显示充值提示
2. **充值引导**：一键跳转到积分购买页面
3. **续费优惠**：积分不足时提供优惠充值选项
4. **降级提示**：建议将长文本分段为免费额度内进行翻译

### 付费流程设计
1. **积分检查**：用户发起长文本翻译时检查积分余额
2. **费用预估**：显示预计消耗积分数量和费用
3. **充值引导**：积分不足时显示充值页面链接
4. **支付处理**：通过Stripe处理积分购买
5. **即时充值**：支付成功后立即到账积分
6. **翻译继续**：充值完成后自动继续翻译任务

---

## 💳 支付系统集成

### 支付方案
**技术方案：Creem REST API + Next.js**
- **Creem Checkout**：现代化支付解决方案，使用简单的REST API
- **支持方式**：信用卡、借记卡、数字钱包
- **多币种支持**：美元为主，支持本地货币显示
- **安全合规**：PCI DSS合规，无需处理敏感卡信息
- **成本优势**：仅收取交易费用，无月费

### 支付流程
1. **在Creem控制台创建产品**：预先在 https://creem.io/dashboard/products 创建积分包产品
2. **创建支付会话**：调用 `POST /v1/checkouts` API创建支付会话
3. **跳转支付页面**：重定向到Creem托管支付页面
4. **处理支付结果**：通过Return URL参数或Webhook接收支付结果
5. **积分入账**：支付成功后立即为用户账户充值积分
6. **发送确认**：发送购买确认邮件（后期功能）

### API调用示例
```javascript
// 创建支付会话
const response = await fetch('https://api.creem.io/v1/checkouts', {
  method: 'POST',
  headers: {
    'x-api-key': process.env.CREEM_API_KEY,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    product_id: 'prod_6tW66i0oZM7w1qXReHJrwg', // 在Creem控制台创建的产品ID
    customer_email: user.email,
    success_url: `${origin}/dashboard?purchase=success`,
    cancel_url: `${origin}/pricing?purchase=canceled`,
    request_id: `user_${user.id}_${Date.now()}` // 用于追踪
  })
});

const checkout = await response.json();
// 重定向到 checkout.url
```

### Return URL处理
支付成功后，用户会被重定向到success_url，携带以下参数：
- `checkout_id`: 支付会话ID
- `order_id`: 订单ID  
- `customer_id`: 客户ID
- `product_id`: 产品ID
- `signature`: Creem签名（用于验证安全性）

### 支付安全
- **签名验证**：验证Creem Return URL签名
- **幂等性处理**：防止重复充值
- **交易记录**：完整的支付和积分变动日志
- **争议处理**：支持支付争议管理

---

## 📊 用户控制台功能

### Dashboard页面功能
- **积分余额显示**：当前积分数量和价值
- **使用历史统计**：翻译次数、字符数统计
- **积分使用明细**：详细的积分消耗记录
- **充值历史**：购买记录和发票下载
- **使用量分析**：日/周/月使用量图表

### 用户资料管理
- **基本信息**：邮箱、昵称、头像
- **密码修改**：安全的密码更新流程
- **邮箱验证状态**：验证状态显示和重新验证
- **账户设置**：通知偏好、语言偏好

### 积分管理功能
- **积分购买**：直接跳转到充值页面
- **使用记录**：翻译任务和积分扣费明细
- **余额提醒**：积分不足时的邮件/站内提醒
- **有效期管理**：积分有效期显示（如设置）

---

## 🛡️ 安全与合规

### 数据安全
- **密码加密**：bcrypt哈希存储
- **Session安全**：安全的JWT令牌管理
- **数据传输**：HTTPS强制加密
- **API安全**：Rate Limiting和API密钥保护

### 隐私保护
- **数据最小化**：仅收集必要的用户信息
- **翻译内容**：不存储用户翻译的文本内容
- **日志记录**：仅记录使用统计，不记录敏感内容
- **数据删除**：用户可申请删除账户和所有数据

### 合规要求
- **GDPR合规**：欧盟用户数据保护
- **CCPA合规**：加州用户隐私保护
- **用户协议**：完整的服务条款和隐私政策
- **Cookie政策**：透明的Cookie使用说明

---

## 🧠 核心功能模块

| 模块         | 描述 |
|--------------|------|
| 文本输入框   | 最大支持10000字符，超过500字符显示积分消耗预估 |
| 双向翻译按钮 | 请求后台NLLB API，支持小语种↔英文双向翻译 |
| 语言切换功能 | 一键切换源语言与目标语言，支持所有语言对的双向翻译 |
| 快捷复制/朗读| 英文朗读+原文朗读（可选） |
| SEO增强模块 | 同义关键词落地内容块、FAQ、评论、视频等 |
| 下载/导出翻译| 导出为TXT/PDF |
| 文件翻译     | 支持PDF/Word/PPT/图片文件上传与翻译，自动提取文本并翻译为英文或目标语种 |
| 双向翻译支持 | 所有支持的语言都可以翻译成英文，同时支持英文翻译成对应语言 |
| 语音播放     | 翻译结果支持语音播放（TTS），MVP先支持英文，后续支持小语种 |
| 用户系统     | 邮箱注册/登录、积分管理、使用历史 |
| 积分系统     | 基于字符数的积分计费，支持积分购买和余额管理 |
| 支付系统     | Stripe集成的积分充值功能 |

---

## 🚀 MVP与功能扩展（优化版）

### MVP首发功能（快速上线版）
```
Phase 1 - 核心MVP（2周内上线）:
┌─────────────────────────────────────────────────────────────────┐
│ 功能模块        优先级    开发时间    上线价值                    │
├─────────────────────────────────────────────────────────────────┤
│ 文本翻译        P0        3天         核心价值验证                │
│ 用户注册登录    P0        2天         用户数据收集                │
│ 基础积分计费    P0        3天         商业化验证                  │
│ 简单定价页面    P0        1天         付费转化测试                │
│ 5个核心语言页面 P1        3天         SEO流量获取                 │
└─────────────────────────────────────────────────────────────────┘

核心功能简化：
- 仅支持文本翻译（暂不支持文档翻译）
- 5个主要小语种：海地克里奥尔语、老挝语、斯瓦希里语、缅甸语、泰卢固语
- 基础用户系统：注册、登录、积分余额
- 简化的3层定价：Starter($5)、Basic($10)、Pro($25)
```

### Phase 2 - 功能完善（上线后1个月）
- **文档翻译功能**：基于用户反馈决定优先级
- **TTS语音播放**：英文语音优先
- **翻译历史记录**：提升用户粘性
- **更多语言支持**：基于用户需求数据
- **用户引导流程**：基于真实用户行为优化

### Phase 3 - 高级功能（上线后3个月）
- **批量翻译工具**：企业用户需求
- **API服务接口**：B2B商业化
- **团队协作功能**：企业客户留存
- **高级统计面板**：用户价值展示

---

## 📝 需求细化与设计补充

### 1. 用户体验与界面细节
- 支持自动检测源语言，用户可通过按钮切换语种，自动检测优先级高于手动选择
- 文件翻译交互：上传后显示文件名、进度条、错误提示和翻译结果提示。翻译结果支持原文-译文对照，内容过长可滚动查看，支持下载新文件。MVP支持最大30~50MB、100页文档，需采用分块/异步处理等技术方案
- 语音播放（TTS）：支持暂停、继续、重播，内嵌播放器，音频格式为mp3或webm
- **积分消耗提示**：长文本翻译前显示预估积分消耗和剩余积分
- **充值引导**：积分不足时显示明显的充值按钮和优惠信息

### 2. Web应用用户体验
- 响应式设计：完美适配桌面端、平板、手机等各种设备
- 直观操作：一键翻译、快速复制、语音播放等便捷功能
- 实时反馈：翻译进度、错误提示、成功状态等用户友好提示
- **登录状态保持**：30天免登录，安全的Session管理
- **积分余额显示**：页面右上角常驻积分余额显示

### 3. SEO与内容运营
- Schema.org结构化数据：MVP阶段静态生成，后续可动态渲染，保证SEO友好
- FAQ、HowTo、SoftwareApplication等Schema：MVP阶段静态维护，后续可接入CMS
- 多语种SEO策略：明确hreflang标签、canonical策略，提升多语种SEO，站点地图自动生成

### 4. 技术实现细节
- NLLB模型部署：MVP阶段采用本地NLLB + Hugging Face云API备选
- 多语种模型切换、模型版本管理：建议通过配置文件管理支持语种和模型版本，便于后续扩展和升级
- 数据存储与隐私：不存储用户翻译历史。文件类翻译结果通过异步方式处理，支持下载链接
- 可扩展性：预留接口支持更多文件格式、语种、TTS引擎
- **用户数据存储**：用户信息、积分余额、使用记录安全存储
- **支付数据安全**：PCI DSS合规的支付数据处理

### 5. 运营与合规
- **积分定价策略**：基于美元锚定的积分体系，支持配置调整
- **免费额度设计**：500字符免费额度平衡用户体验和商业价值
- **新用户激励**：注册赠送积分、首充奖励提升转化率
- 用户协议、隐私政策、合规声明：需提供相应页面，确保合规
- **GDPR/CCPA合规**：用户数据保护和隐私权利实现

### 6. 网站架构优化需求

#### 6.1 首页功能重构
- **当前问题**: 首页直接嵌入文本翻译功能，影响产品展示
- **解决方案**: 
  - 将文本翻译功能独立到 `/text-translate` 页面
  - 首页改为展示多种翻译形式：
    - Text翻译（跳转到 `/text-translate`）
    - Document翻译（跳转到 `/document-translate`）
    - 图片翻译（Coming Soon状态）
  - **用户状态显示**：首页右上角显示登录状态和积分余额

#### 6.2 语言落地页系统
- **功能需求**: 为Supported Languages模块中的每个语言创建完整落地页
- **页面分类**:
  - **已支持语言**: 完整的翻译功能页面（如 `/creole-to-english`）
  - **暂不支持语言**: Coming Soon提示页面
- **SEO要求**: 所有页面需包含完整的Schema.org结构化数据
- **路径规范**: `/{source-language}-to-english` 格式
- **付费功能集成**：语言页面集成积分计费和用户系统

#### 6.3 多语言界面支持 (i18n)
- **功能描述**: 整个网站支持界面语言切换
- **支持语言**: 网站可翻译的小语种（海地克里奥尔语、老挝语、斯瓦希里语、缅甸语等）
- **实现范围**: 
  - 导航栏、按钮、表单等所有UI元素
  - 页面标题、描述文案
  - 错误提示、状态信息
  - **积分系统相关文案**：充值提示、余额显示、计费说明
- **技术方案**: Next.js国际化(i18n)系统 + react-i18next

#### 6.4 Footer链接完善
- **当前问题**: Contact Support、API Documentation等链接导向404
- **需要完善的页面**:
  - Contact Support: 联系方式页面或Coming Soon
  - API Documentation: API文档页面或Coming Soon  
  - Help & FAQ: 帮助文档页面
  - Blog: 博客页面或Coming Soon
  - **新增**：Pricing定价页面、Terms服务条款、Privacy隐私政策

### 转化漏斗优化设计

#### 用户转化路径
```
转化漏斗设计（基于$5入门价位）：
┌─────────────────────────────────────────────────────────────────┐
│ 阶段          触发条件           引导策略           预期转化率    │
├─────────────────────────────────────────────────────────────────┤
│ 访客→注册     首次使用翻译       显示注册优势        15%         │
│ 注册→活跃     完成首次翻译       新手引导任务        80%         │
│ 活跃→付费     积分余额<100       推荐Starter套餐     12%         │
│ 付费→复购     积分用完80%        智能续费提醒        45%         │
│ 复购→升级     使用量超套餐       推荐更大套餐        25%         │
└─────────────────────────────────────────────────────────────────┘
```

#### 智能推荐算法
```javascript
// 基于用户行为的套餐推荐逻辑
const getRecommendedPlan = (userUsage) => {
  const { 
    dailyChars, 
    weeklyChars, 
    monthlyChars, 
    documentUploads,
    currentCredits 
  } = userUsage;
  
  // 预测月度使用量
  const predictedMonthly = Math.max(
    dailyChars * 30,
    weeklyChars * 4.3,
    monthlyChars
  );
  
  // 套餐推荐逻辑
  if (predictedMonthly <= 25000) return 'starter';    // $5
  if (predictedMonthly <= 60000) return 'basic';      // $10
  if (predictedMonthly <= 200000) return 'professional'; // $25
  if (predictedMonthly <= 500000) return 'business';  // $50
  return 'enterprise'; // $120
};
```

#### 价格敏感度测试
```
A/B测试方案（入门套餐）：
┌─────────────────────────────────────────────────────────────────┐
│ 测试组    价格    积分数    价值感知    预期转化率   目标用户      │
├─────────────────────────────────────────────────────────────────┤
│ A组       $5      2500      标准       12%         价格敏感      │
│ B组       $5      3000      超值       15%         价值导向      │
│ C组       $4.99   2500      心理价位   14%         冲动消费      │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📊 商业化策略总结

### 核心策略调整
1. **入门门槛**: $5起步，降低用户心理负担
2. **价值阶梯**: 清晰的套餐差异化，满足不同需求
3. **转化优化**: 基于使用行为的智能推荐
4. **留存提升**: 忠诚度计划和订阅模式

### 预期商业指标
```
关键指标预测（基于$5入门价位）：
┌─────────────────────────────────────────────────────────────────┐
│ 指标类型        当前基线    优化目标    提升幅度    实现时间      │
├─────────────────────────────────────────────────────────────────┤
│ 注册转化率      8%          15%         +87%        1个月       │
│ 付费转化率      5%          12%         +140%       2个月       │
│ 平均客单价      $5          $18         +260%       3个月       │
│ 用户留存率      35%         55%         +57%        6个月       │
│ 月度收入        基准        +300%       3倍增长     6个月       │
└─────────────────────────────────────────────────────────────────┘
```

## 🎨 UI/UX设计规范与用户体验优化

### 设计理念
- **简洁专业**: 突出小语种翻译的专业性
- **用户友好**: 3秒内理解产品价值
- **移动优先**: 响应式设计，完美适配各设备
- **转化导向**: 每个界面元素都服务于用户转化

### 首页设计架构
```
首页信息层次结构：

Hero Section (首屏黄金区域):
┌─────────────────────────────────────────────────────────────────┐
│ 🎯 核心价值主张                                                │
│ "专业小语种翻译，Google翻译覆盖不到的语言我们都支持"            │
│                                                                 │
│ [立即免费试用] [查看支持语言]                                   │
│                                                                 │
│ 💡 突出显示: "海地克里奥尔语、老挝语、缅甸语等20+小语种"        │
└─────────────────────────────────────────────────────────────────┘

Problem-Solution Section:
┌─────────────────────────────────────────────────────────────────┐
│ 用户痛点展示 → 解决方案对比                                     │
│                                                                 │
│ ❌ Google翻译不支持    ✅ Transly专业支持                       │
│ ❌ 翻译质量不准确      ✅ 基于NLLB模型，准确率>90%               │
│ ❌ 缺少专业功能        ✅ 文档翻译、语音播放、历史记录           │
└─────────────────────────────────────────────────────────────────┘

Social Proof Section:
┌─────────────────────────────────────────────────────────────────┐
│ 用户案例展示                                                    │
│ "学术研究者翻译海地文献" | "移民用户处理官方文件"               │
│ "跨境电商本地化产品描述" | "NGO工作者多语种沟通"                │
└─────────────────────────────────────────────────────────────────┘
```

### 翻译功能界面设计
```
优化后的翻译界面布局：

语言选择区域:
┌─────────────────────────────────────────────────────────────────┐
│ [海地克里奥尔语 ↔️ English] [🔄 切换]                           │
│ 💡 智能提示: "检测到克里奥尔语，是否自动翻译？"                 │
└─────────────────────────────────────────────────────────────────┘

翻译主界面:
┌─────────────────────────────────────────────────────────────────┐
│ 输入区域                                    │ 输出区域            │
│ [文本输入框]                               │ [翻译结果]          │
│                                            │                     │
│ 字符计数: 245/300 (免费)                   │ [🔊 播放] [📋 复制] │
│ 💰 超出后: 0.1积分/字符                    │ [⭐ 收藏] [📤 分享] │
└─────────────────────────────────────────────────────────────────┘

操作区域:
┌─────────────────────────────────────────────────────────────────┐
│ [🚀 翻译] 预计消耗: 0积分 | 剩余积分: 500                       │
│                                                                 │
│ 💡 提示: "注册用户300字符内完全免费"                            │
└─────────────────────────────────────────────────────────────────┘
```

### 交互状态设计
```
翻译过程状态管理：

准备状态:
- 显示字符计数和积分预估
- 智能语言检测提示
- 清晰的免费/付费边界

处理状态:
- 进度条显示翻译进度
- "正在翻译中..." 动画效果
- 预估完成时间显示

完成状态:
- 翻译结果高亮显示
- 操作按钮组合理布局
- 质量评分邀请（可选）

错误状态:
- 友好的错误提示
- 重试按钮明显
- 客服联系方式
```

### 定价页面UX优化
```
场景化定价展示：

用户场景选择器:
┌─────────────────────────────────────────────────────────────────┐
│ 🎯 找到适合您的套餐                                             │
│                                                                 │
│ 💭 "我是..." 场景选择器                                        │
│ [👨‍🎓 学生] [👩‍💼 专业人士] [🏢 企业用户] [🌍 个人用户]              │
└─────────────────────────────────────────────────────────────────┘

基于场景的套餐推荐:
┌─────────────────────────────────────────────────────────────────┐
│ 👨‍🎓 学生用户推荐                                               │
│                                                                 │
│ Starter Pack - $5                                              │
│ ✅ 完美适合学术论文翻译                                         │
│ ✅ 2,500积分 ≈ 25万字符                                        │
│ ✅ 约可翻译10-15篇学术论文                                      │
│                                                                 │
│ 💬 "我用它翻译了整个学期的海地文学作品" - 张同学                │
│                                                                 │
│ [选择此套餐] [查看详情]                                         │
└─────────────────────────────────────────────────────────────────┘

价值对比展示:
┌─────────────────────────────────────────────────────────────────┐
│ 💰 成本对比                                                     │
│                                                                 │
│ 人工翻译: $0.12/字 × 1000字 = $120                             │
│ Google翻译: 不支持小语种 ❌                                     │
│ Transly: $0.001/字 × 1000字 = $1 ✅                           │
│                                                                 │
│ 💡 节省成本: 99%                                               │
└─────────────────────────────────────────────────────────────────┘
```

### 移动端设计规范
```
移动端翻译界面：

┌─────────────────────┐
│ 🌐 Transly          │
│ ═══════════════════ │
│                     │
│ 🔄 [克里奥尔语→英文] │
│                     │
│ ┌─────────────────┐ │
│ │ 输入文本...     │ │
│ │                 │ │
│ │                 │ │
│ └─────────────────┘ │
│ 📊 245/300 免费     │
│                     │
│ [🚀 翻译]           │
│                     │
│ ┌─────────────────┐ │
│ │ 翻译结果...     │ │
│ │                 │ │
│ └─────────────────┘ │
│ [🔊] [📋] [⭐]      │
└─────────────────────┘

移动端交互优化:
- 按钮最小尺寸44px×44px
- 滑动切换语言方向
- 长按复制翻译结果
- 双击放大文本区域
- 语音输入快捷按钮
```

### 用户引导流程设计
```
新用户Onboarding流程：

Step 1: 欢迎页面
┌─────────────────────────────────────────────────────────────────┐
│ 🎉 欢迎使用Transly!                                             │
│                                                                 │
│ 我们专注于小语种翻译，让每种语言都能被理解                      │
│                                                                 │
│ 🎁 新用户礼包: 500积分 (价值$2)                                │
│                                                                 │
│ [开始体验] [跳过引导]                                           │
└─────────────────────────────────────────────────────────────────┘

Step 2: 功能演示
┌─────────────────────────────────────────────────────────────────┐
│ 💡 试试翻译这句海地克里奥尔语:                                  │
│                                                                 │
│ "Bonjou, kijan ou ye?"                                         │
│                                                                 │
│ [点击翻译] → "Hello, how are you?"                             │
│                                                                 │
│ ✨ 看到了吗？我们支持Google翻译不支持的语言！                   │
└─────────────────────────────────────────────────────────────────┘

Step 3: 个性化设置
┌─────────────────────────────────────────────────────────────────┐
│ 🌍 您最常用的语言是？                                           │
│                                                                 │
│ [海地克里奥尔语] [老挝语] [斯瓦希里语]                          │
│ [缅甸语] [泰卢固语] [其他...]                                   │
│                                                                 │
│ 💡 我们会为您优化翻译体验                                       │
└─────────────────────────────────────────────────────────────────┘
```

### 用户成就反馈系统
```
进度反馈和激励机制：
┌─────────────────────────────────────────────────────────────────┐
│ 🏆 您的翻译成就                                                 │
│                                                                 │
│ ✅ 首次翻译完成 (+50积分奖励)                                   │
│ ✅ 连续使用3天 (+100积分奖励)                                   │
│ 🔄 尝试5种不同语言 (进度: 2/5)                                  │
│ 🔄 翻译10万字符 (进度: 25,000/100,000)                         │
│                                                                 │
│ 下一个成就: 邀请朋友注册 (+200积分)                             │
└─────────────────────────────────────────────────────────────────┘
```

### 设计系统规范
```
视觉设计标准：

色彩系统:
- 主色调: #2563EB (蓝色 - 专业、可信)
- 辅助色: #10B981 (绿色 - 成功、免费)
- 警告色: #F59E0B (橙色 - 积分不足)
- 错误色: #EF4444 (红色 - 翻译失败)
- 中性色: #6B7280 (灰色 - 辅助信息)

字体系统:
- 标题: 24px-32px, 粗体 (移动端+2px)
- 正文: 16px-18px, 常规 (移动端+2px)
- 说明: 14px, 浅色 (移动端+2px)
- 代码: 等宽字体

间距系统:
- 基础单位: 8px
- 组件间距: 16px, 24px, 32px
- 页面边距: 16px (移动端), 24px (桌面端)

圆角系统:
- 按钮: 8px
- 卡片: 12px
- 输入框: 6px
```

## 🛠️ 技术架构与实施要点（5人小团队版）

### 技术选型原则
- **简单优先**: 选择团队熟悉的技术栈
- **快速上线**: 避免过度工程化
- **成本控制**: 优先使用免费/低成本服务
- **维护性**: 减少技术债务，便于后期扩展

### 核心技术栈（已确定）
```
前端技术栈:
- Next.js 14+ (React + TypeScript)
- Tailwind CSS (样式)
- Vercel (部署托管)

后端技术栈:
- Next.js API Routes (后端API)
- Supabase (数据库 + 认证)
- Meta NLLB (翻译引擎)

第三方服务:
- Creem (支付处理)
- Vercel KV (缓存，可选)
- Resend (邮件服务，后期)
```

### 简化架构设计
```
MVP架构 (单体应用):
┌─────────────────────────────────────────────────────────────────┐
│ Vercel 部署                                                     │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ Next.js 应用                                                │ │
│ │ ├── 前端页面 (React组件)                                   │ │
│ │ ├── API路由 (/api/*)                                       │ │
│ │ ├── 翻译逻辑                                               │ │
│ │ └── 支付集成                                               │ │
│ └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
              ↓ 外部服务调用
┌─────────────────────────────────────────────────────────────────┐
│ 外部服务                                                        │
│ ├── Supabase (用户数据 + 认证)                                 │
│ ├── NLLB服务 (翻译引擎)                                        │
│ ├── Creem API (支付处理)                                       │
│ └── Vercel KV (缓存，可选)                                     │
└─────────────────────────────────────────────────────────────────┘
```

### 翻译服务实现（简化版）
```typescript
// 翻译服务 - 简单可靠的实现
class TranslationService {
  private cache = new Map(); // 内存缓存，简单有效
  
  async translate(text: string, sourceLang: string, targetLang: string) {
    // 1. 检查内存缓存
    const cacheKey = `${text}-${sourceLang}-${targetLang}`;
    if (this.cache.has(cacheKey)) {
      return this.cache.get(cacheKey);
    }
    
    try {
      // 2. 调用NLLB服务
      const result = await this.callNLLBService(text, sourceLang, targetLang);
      
      // 3. 缓存结果（限制缓存大小）
      if (this.cache.size < 1000) {
        this.cache.set(cacheKey, result);
      }
      
      return result;
    } catch (error) {
      // 4. 简单错误处理
      console.error('Translation failed:', error);
      throw new Error('翻译服务暂时不可用，请稍后重试');
    }
  }
  
  private async callNLLBService(text: string, source: string, target: string) {
    // 调用本地NLLB服务或Hugging Face API
    const response = await fetch('http://localhost:8081/translate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ text, source_language: source, target_language: target })
    });
    
    if (!response.ok) {
      throw new Error('NLLB service error');
    }
    
    const data = await response.json();
    return data.translated_text;
  }
}
```

### 积分系统实现（简化版）
```typescript
// 积分系统 - 基于Supabase的简单实现
class CreditsService {
  constructor(private supabase: SupabaseClient) {}
  
  async deductCredits(userId: string, amount: number, reason: string) {
    // 使用Supabase的RPC功能确保原子性
    const { data, error } = await this.supabase.rpc('deduct_user_credits', {
      user_id: userId,
      credit_amount: amount,
      transaction_reason: reason
    });
    
    if (error) {
      if (error.message.includes('insufficient')) {
        throw new Error('积分不足，请充值后继续使用');
      }
      throw new Error('积分扣减失败，请稍后重试');
    }
    
    return data.remaining_credits;
  }
  
  async getUserCredits(userId: string): Promise<number> {
    const { data, error } = await this.supabase
      .from('users')
      .select('credits')
      .eq('id', userId)
      .single();
    
    if (error) throw new Error('获取积分余额失败');
    return data.credits || 0;
  }
}
```

### 数据库设计（Supabase）
```sql
-- 用户表
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  credits INTEGER DEFAULT 500, -- 新用户500积分
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- 积分交易记录表
CREATE TABLE credit_transactions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  type VARCHAR(20) NOT NULL, -- 'purchase', 'deduct', 'reward'
  amount INTEGER NOT NULL, -- 正数为增加，负数为扣减
  balance INTEGER NOT NULL, -- 交易后余额
  reason TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 支付记录表
CREATE TABLE payments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  creem_payment_id VARCHAR(255) UNIQUE,
  amount_usd DECIMAL(10,2) NOT NULL,
  credits INTEGER NOT NULL,
  status VARCHAR(20) DEFAULT 'pending', -- 'pending', 'completed', 'failed'
  created_at TIMESTAMP DEFAULT NOW(),
  completed_at TIMESTAMP
);

-- 积分扣减函数（确保原子性）
CREATE OR REPLACE FUNCTION deduct_user_credits(
  user_id UUID,
  credit_amount INTEGER,
  transaction_reason TEXT
) RETURNS JSON AS $$
DECLARE
  current_credits INTEGER;
  new_balance INTEGER;
BEGIN
  -- 获取当前积分并锁定行
  SELECT credits INTO current_credits 
  FROM users 
  WHERE id = user_id 
  FOR UPDATE;
  
  -- 检查积分是否足够
  IF current_credits < credit_amount THEN
    RAISE EXCEPTION 'insufficient credits';
  END IF;
  
  -- 计算新余额
  new_balance := current_credits - credit_amount;
  
  -- 更新用户积分
  UPDATE users 
  SET credits = new_balance, updated_at = NOW() 
  WHERE id = user_id;
  
  -- 记录交易
  INSERT INTO credit_transactions (user_id, type, amount, balance, reason)
  VALUES (user_id, 'deduct', -credit_amount, new_balance, transaction_reason);
  
  -- 返回结果
  RETURN json_build_object('remaining_credits', new_balance);
END;
$$ LANGUAGE plpgsql;
```

### 错误处理策略（简化版）
```typescript
// 全局错误处理 - 简单实用
export class AppError extends Error {
  constructor(
    public message: string,
    public statusCode: number = 500,
    public userMessage?: string
  ) {
    super(message);
  }
}

// API路由错误处理
export function withErrorHandler(handler: Function) {
  return async (req: NextRequest) => {
    try {
      return await handler(req);
    } catch (error) {
      console.error('API Error:', error);
      
      if (error instanceof AppError) {
        return NextResponse.json(
          { error: error.userMessage || error.message },
          { status: error.statusCode }
        );
      }
      
      return NextResponse.json(
        { error: '服务暂时不可用，请稍后重试' },
        { status: 500 }
      );
    }
  };
}

// 使用示例
export const POST = withErrorHandler(async (req: NextRequest) => {
  const { text, sourceLang, targetLang } = await req.json();
  
  if (!text || text.length > 10000) {
    throw new AppError('文本长度不能超过10000字符', 400);
  }
  
  const result = await translationService.translate(text, sourceLang, targetLang);
  return NextResponse.json({ translatedText: result });
});
```

### 部署和运维（简化版）
```yaml
# 部署配置 - Vercel
# vercel.json
{
  "functions": {
    "app/api/**/*.ts": {
      "maxDuration": 30
    }
  },
  "env": {
    "SUPABASE_URL": "@supabase-url",
    "SUPABASE_ANON_KEY": "@supabase-anon-key",
    "CREEM_API_KEY": "@creem-api-key",
    "NLLB_SERVICE_URL": "@nllb-service-url"
  }
}

# 环境变量管理
# .env.local (开发环境)
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
CREEM_API_KEY=your_creem_api_key
NLLB_SERVICE_URL=http://localhost:8081
```

### 监控方案（简化版）
```typescript
// 简单的监控和日志
class SimpleMonitor {
  static logError(error: Error, context: string) {
    console.error({
      timestamp: new Date().toISOString(),
      error: error.message,
      context,
      stack: error.stack
    });
    
    // 生产环境可以发送到外部服务
    if (process.env.NODE_ENV === 'production') {
      // 发送到Sentry、LogRocket等服务
    }
  }
  
  static logMetric(name: string, value: number, tags?: Record<string, string>) {
    console.log({
      timestamp: new Date().toISOString(),
      metric: name,
      value,
      tags
    });
  }
}

// 使用示例
export async function translateText(text: string) {
  const startTime = Date.now();
  
  try {
    const result = await translationService.translate(text);
    
    // 记录成功指标
    SimpleMonitor.logMetric('translation.success', 1);
    SimpleMonitor.logMetric('translation.duration', Date.now() - startTime);
    
    return result;
  } catch (error) {
    // 记录错误
    SimpleMonitor.logError(error, 'translation');
    SimpleMonitor.logMetric('translation.error', 1);
    throw error;
  }
}
```

### 小团队开发流程
```
开发分工建议:
├── 前端开发 (2人)
│   ├── 页面组件开发
│   ├── UI/UX实现
│   └── 用户交互逻辑
│
├── 后端开发 (2人)
│   ├── API接口开发
│   ├── 数据库设计
│   ├── 翻译服务集成
│   └── 支付系统集成
│
└── 全栈/DevOps (1人)
    ├── 项目架构设计
    ├── 部署和运维
    ├── 代码审查
    └── 问题排查

技术债务管理:
- 每周代码审查会议
- 重构优先级评估
- 性能问题及时处理
- 文档同步更新
```

### 性能优化要点（小团队版）
```
前端优化:
□ 使用Next.js内置的图片和字体优化
□ 实施基础的代码分割
□ 启用Vercel的边缘缓存
□ 压缩和优化静态资源

后端优化:
□ 实施简单的内存缓存
□ 数据库查询优化
□ API响应压缩
□ 合理的超时设置

部署优化:
□ 使用Vercel的自动优化
□ 配置合适的缓存策略
□ 监控核心性能指标
□ 设置基础告警
```

### 安全要点（小团队版）
```
基础安全措施:
□ 输入验证和清理
□ SQL注入防护（使用Supabase ORM）
□ XSS防护（React内置）
□ CSRF防护（SameSite cookies）
□ HTTPS强制（Vercel自动）
□ 环境变量安全管理
□ 基础的速率限制

数据安全:
□ 用户密码哈希（Supabase处理）
□ 敏感数据加密
□ 定期数据备份
□ 访问日志记录
```

### 技术风险控制
```
主要风险和应对:
1. NLLB服务不稳定
   → 准备Hugging Face API作为备用

2. Supabase服务中断
   → 实施基础的错误处理和用户提示

3. 支付系统问题
   → Creem官方支持 + 手动处理流程

4. 性能瓶颈
   → 监控关键指标，及时优化

5. 团队成员变动
   → 代码文档化，知识共享
```

---

## 🚀 快速上线检查清单

### 上线前必须完成（P0优先级）
```
技术准备：
□ 文本翻译API正常工作
□ 用户注册登录流程测试通过
□ 积分计费系统功能正常
□ 支付系统（Creem）集成测试
□ 5个核心语言页面部署完成
□ Supabase数据库表结构创建
□ 环境变量配置正确
□ 错误处理机制测试

技术架构检查：
□ Next.js应用构建成功
□ Vercel部署配置正确
□ Supabase连接测试通过
□ NLLB服务连通性测试
□ Creem支付接口测试
□ 基础缓存机制工作
□ 日志记录功能正常

代码质量检查：
□ 核心功能单元测试通过
□ API接口集成测试完成
□ 错误边界测试覆盖
□ 性能基准测试完成
□ 安全漏洞扫描通过
□ 代码审查完成
□ 文档更新同步

UI/UX准备：
□ 首页价值主张清晰展示（3秒理解测试）
□ 翻译界面交互流程顺畅
□ 定价页面场景化展示完成
□ 移动端基础响应式适配
□ 用户引导流程基础版本
□ 错误处理和提示友好
□ 核心按钮和链接可点击测试

设计系统准备：
□ 色彩系统应用一致
□ 字体大小和层次清晰
□ 按钮尺寸符合触摸标准
□ 页面加载状态设计
□ 空状态页面设计

内容准备：
□ 用户反馈收集机制（邮箱/表单）
□ 基础数据统计（注册、付费、使用量）
□ 客服联系方式设置
□ 隐私政策和服务条款页面
□ 用户案例和社会证明内容
```

### 上线后立即监控的关键指标
```
用户行为指标：
- 日访问量 (目标: >100 UV/天)
- 注册转化率 (目标: >10%)
- 翻译使用次数 (目标: >50次/天)
- 页面停留时间 (目标: >2分钟)
- 首页跳出率 (目标: <60%)

UI/UX体验指标：
- 首页价值理解率 (用户调研: >80%)
- 翻译功能完成率 (目标: >90%)
- 移动端使用占比 (监控: 预期>50%)
- 用户引导完成率 (目标: >70%)
- 界面错误反馈数量 (目标: <5个/天)

商业化指标：
- 付费转化率 (目标: >5%)
- 平均客单价 (目标: >$8)
- 积分消耗率 (监控用户使用模式)
- 支付成功率 (目标: >95%)
- 定价页面转化率 (目标: >15%)

技术指标：
- 页面加载速度 (目标: <3秒)
- 翻译API响应时间 (目标: <5秒)
- 系统错误率 (目标: <1%)
- 服务可用性 (目标: >99%)
- 移动端兼容性 (目标: 主流设备100%)
```

### 上线后1周内优化重点
1. **基于真实用户反馈调整免费额度**
2. **优化最常用的翻译语言对**
3. **改进用户引导流程**（基于完成率数据）
4. **修复用户报告的关键bug**
5. **分析用户使用路径，优化转化漏斗**
6. **优化移动端体验**（基于使用数据）
7. **改进首页价值传达**（基于跳出率）
8. **优化定价页面转化**（基于热力图分析）

### UI/UX持续优化计划
```
第1周: 问题修复和基础优化
- 收集用户界面使用反馈
- 修复移动端兼容性问题
- 优化页面加载速度
- 改进错误提示文案

第2-4周: 体验深度优化
- A/B测试首页不同价值主张
- 优化翻译界面交互流程
- 完善用户引导系统
- 增加用户成就反馈

第2个月: 高级功能和个性化
- 实施智能语言推荐
- 添加用户偏好设置
- 优化定价页面场景化展示
- 建立完整设计系统
```

### 用户数据模型 (Supabase PostgreSQL)
```typescript
interface User {
  id: string               // Supabase Auth User ID
  email: string
  emailVerified: boolean
  credits: number          // 积分余额
  createdAt: Date
  updatedAt: Date
  profile: {
    name?: string
    avatar?: string
    language: string       // 界面语言偏好
  }
}
```

### 积分交易记录
```typescript
interface CreditTransaction {
  id: string
  userId: string
  type: 'purchase' | 'consume' | 'reward'
  amount: number           // 正数为增加，负数为消费
  balance: number          // 交易后余额
  description: string      // 交易描述
  metadata?: {
    translationId?: string
    stripePaymentId?: string
    characterCount?: number
  }
  createdAt: Date
}
```

### 翻译使用记录
```typescript
interface Translation {
  id: string
  userId?: string          // 可选，游客用户为空
  sourceText: string
  translatedText: string
  sourceLanguage: string
  targetLanguage: string
  characterCount: number
  creditsUsed: number      // 消耗的积分
  method: 'nllb-local' | 'nllb-cloud' | 'mock'
  createdAt: Date
}
```

### 支付记录
```typescript
interface Payment {
  id: string
  userId: string
  creemPaymentId: string   // Creem支付ID
  amount: number           // 美元金额
  credits: number          // 购买的积分数量
  status: 'pending' | 'completed' | 'failed'
  createdAt: Date
  completedAt?: Date
}
```

---

## 💰 技术栈成本分析

### 免费服务层级
- **Frontend & Hosting**: Next.js + Vercel（免费层级）
- **身份验证**: Supabase Auth（50,000 月活用户免费）
- **数据库**: Supabase PostgreSQL（500MB 存储免费）
- **邮件服务**: Resend（3,000封邮件/月免费，低优先级功能）
- **支付处理**: Creem（仅收取交易费用，无月费）

### 预期月度成本
- **基础设施成本**: $0/月
- **交易费用**: 仅在用户购买积分时产生（通常2.9% + $0.30/笔）
- **总月度成本**: $0（除交易费用外）

### 扩展计划
- **Vercel Pro**: $20/月（团队协作、更多构建分钟）
- **Supabase Pro**: $25/月（8GB数据库、更多API调用）
- **成本可控**: 随用户增长按需升级