# PCI DSS 合规策略

## 1. 引言

支付卡行业数据安全标准（PCI DSS）是一套旨在确保所有处理、存储或传输信用卡信息的公司都维持一个安全环境的安全标准。对于 Transly 平台而言，遵守 PCI DSS 是保护用户信任和数据安全的基础。

## 2. 我们的合规策略：完全外包

**我们的核心 PCI DSS 合规策略是：不自行处理、传输或存储任何敏感的持卡人数据。**

我们将所有涉及敏感支付卡信息的环节完全外包给 **Creem, Inc.**，一家经过认证的 PCI DSS Level 1 服务提供商。

通过这种方式，我们将 PCI DSS 合规的复杂性和责任降至最低。

## 3. 工作流程与数据流

为了确保敏感数据不接触我们的服务器，我们采用了以下工作流程：

1.  **发起支付**: 用户在我们的定价页面 (`/pricing`) 选择一个积分包并点击"购买"。
2.  **创建会话**: 我们的前端向后端API (`/api/checkout`) 发送一个请求，请求中只包含非敏感信息（如 `planId`）。
3.  **获取支付链接**: 我们的后端服务器与 Creem API 通信，创建一个支付会话（Checkout Session），并获取一个一次性的、安全的支付 URL。在此过程中，我们的服务器仅向 Creem 发送订单信息（如价格）和非敏感的用户信息（如用户ID，作为元数据），**不发送任何支付卡信息**。
4.  **重定向至 Creem**: 我们的前端将用户重定向到上一步获取到的 Creem 托管的支付页面。从此开始，用户的所有交互都在 Creem 的安全环境中进行。
5.  **输入信息**: 用户在 Creem 的页面上输入他们的信用卡号、有效期、CVV 等敏感信息。**这些信息直接提交给 Creem，从未经过我们的服务器**。
6.  **支付结果通知**: Creem 处理支付。支付完成后，Creem 通过一个安全的、经过签名的 Webhook 事件通知我们的后端服务器 (`/api/webhooks/creem`)。这个通知中只包含支付状态和我们之前发送的元数据（如 `userId`），**不包含任何敏感的持卡人数据**。
7.  **完成购买**: 我们的 Webhook 处理器验证通知的签名，确认支付成功后，为用户的账户充值积分。

## 4. 我们的 PCI DSS 合规范围

由于我们采用了上述架构，Transly 的 PCI DSS 合规范围被限定为 **SAQ A**（自我评估问卷 A）。

SAQ A 适用于那些已将所有持卡人数据处理功能完全外包给符合 PCI DSS 标准的第三方服务提供商的商户。我们满足 SAQ A 的所有条件，因为：
- 我们接受的支付方式仅为电子商务交易。
- 所有对持卡人数据的处理都外包给了 Creem。
- 我们不以电子方式存储、处理或传输任何持卡人数据。
- 我们的服务器上没有任何会影响 Creem 系统安全性的功能。

## 5. 合规验证步骤

作为 SAQ A 商户，我们的合规验证步骤相对简单：

1.  **确认范围**: 确认我们的业务流程没有发生任何变化，仍然符合 SAQ A 的要求。
2.  **完成 SAQ A**: 每年填写并签署一次自我评估问卷 A。
3.  **获取合规证明 (AOC)**: 完成 SAQ A 后，我们将获得一份合规证明（Attestation of Compliance）。
4.  **持续监控**: 确保我们与 Creem 的集成方式（例如 API 调用和 Webhook 处理）保持安全，并遵循 Creem 的最佳实践。

---
*免责声明：本文档阐述了我们的合规策略和理解，不构成正式的法律意见或合规认证。* 