# PolyTrans AI开发协作流程规则

## 1. 需求与任务拆解
- 产品需求以 product.md 为唯一源头，AI辅助梳理任务树和依赖，人工确认。
- 任务拆解需输出详细todo list，分层级、标明依赖。

## 2. 接口与数据结构设计
- AI根据需求生成OpenAPI规范、接口文档、数据结构定义。
- 团队/AI共同评审，人工最终确认。

## 3. 分阶段开发与评审
- 每个大模块由AI生成初版代码，人工进行代码Review和单元测试补充。
- 关键路径（如限流、授权、付费）需人工重点验收。
- 代码合并需通过自动化测试。
- 禁止本次修改影响已开发和已测试通过的功能，需进行回归测试，确保无回归缺陷。

## 4. 自动化测试与CI
- AI生成单元/集成测试用例，人工补充边界场景。
- 集成CI，自动跑测试，保证每次提交可用。
- 所有主功能需有自动化测试覆盖。
- 上一功能的单元测试全部通过后，方可开始下一个开发任务。

## 5. 代码规范与开发纪律
- 禁止硬编码，所有配置（如API Key、限流参数、模型参数等）必须通过配置文件或环境变量管理。
- 每次完成任务或功能变更后，必须进行Git commit，保持提交原子性和可追溯性。

## 6. 文档与交付
- AI生成API文档、用户手册、部署说明，人工校对。
- 文档需与代码同步更新，保证可用性和可读性。

## 7. 进度管理与验收
- 开发功能通过全部相关测试后，才可在 todo_list.md 中更新进度。
- 所有AI生成的功能，需通过人工验收Checklist（功能、性能、安全、合规）。
- 验收通过后方可上线。

## 8. 变更与反馈
- 需求或任务变更需同步更新 product.md 和 todo_list.md。
- AI协作过程中遇到不确定点，需人工决策。

---

> 本规则文件为AI驱动开发的流程保障，确保高效协作与交付质量。 